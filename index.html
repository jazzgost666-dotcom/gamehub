<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Painel Game Dev Space</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: white; padding: 20px; }
        .card { background: #1e1e1e; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #333; }
        button { cursor: pointer; padding: 10px; background: #f39c12; border: none; border-radius: 4px; color: black; font-weight: bold; }
        input { padding: 10px; margin: 5px 0; width: 200px; }
        #status { color: #27ae60; font-weight: bold; }
    </style>
</head>
<body>

    <h1>Painel de Controle - Firebase</h1>
    <div id="status">Status: Desconectado</div>

    <div class="card">
        <h3>Autenticação (Auth)</h3>
        <input type="email" id="email" placeholder="E-mail">
        <input type="password" id="pass" placeholder="Senha">
        <br><br>
        <button id="btnLogin">Entrar / Criar Conta</button>
        <button id="btnLogout">Sair</button>
    </div>

    <div class="card">
        <h3>Ranking de Jogadores (Realtime Database)</h3>
        <input type="text" id="playerName" placeholder="Nome do Jogador">
        <input type="number" id="playerScore" placeholder="Pontuação">
        <button id="btnSaveData">Salvar Pontuação</button>
        <ul id="rankingList"></ul>
    </div>

    <div class="card">
        <h3>Upload de Assets (Storage)</h3>
        <input type="file" id="filePicker">
        <button id="btnUpload">Subir Arquivo</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        import { getStorage, ref as sRef, uploadBytes } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        // CONFIGURAÇÃO QUE VOCÊ ENVIOU
        const firebaseConfig = {
            apiKey: "AIzaSyAMHAKVot044psR421B_t-Ht5EmsueVS8A",
            authDomain: "game-dev-space.firebaseapp.com",
            databaseURL: "https://game-dev-space-default-rtdb.firebaseio.com",
            projectId: "game-dev-space",
            storageBucket: "game-dev-space.firebasestorage.app",
            messagingSenderId: "1073185335190",
            appId: "1:1073185335190:web:ae9ffd88cdf89f53cbdfb7"
        };

        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);
        const storage = getStorage(app);

        // --- FUNÇÕES DE AUTH ---
        document.getElementById('btnLogin').onclick = () => {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('pass').value;
            createUserWithEmailAndPassword(auth, email, pass)
                .then(() => alert("Usuário Criado/Logado!"))
                .catch(err => signInWithEmailAndPassword(auth, email, pass));
        };

        // --- FUNÇÕES DE DATABASE ---
        document.getElementById('btnSaveData').onclick = () => {
            const name = document.getElementById('playerName').value;
            const score = document.getElementById('playerScore').value;
            set(ref(db, 'ranking/' + name), { pontuacao: score });
        };

        // Escutar dados em tempo real
        onValue(ref(db, 'ranking/'), (snapshot) => {
            const data = snapshot.val();
            const list = document.getElementById('rankingList');
            list.innerHTML = "";
            for (let id in data) {
                list.innerHTML += `<li>${id}: ${data[id].pontuacao} pts</li>`;
            }
        });

        // --- FUNÇÕES DE STORAGE ---
        document.getElementById('btnUpload').onclick = () => {
            const file = document.getElementById('filePicker').files[0];
            const storageRef = sRef(storage, 'uploads/' + file.name);
            uploadBytes(storageRef, file).then(() => alert("Arquivo enviado!"));
        };

    </script>
</body>
</html>
