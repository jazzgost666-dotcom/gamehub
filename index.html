<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameDev Space Elite | Sed-Games</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, push, onValue, update, increment, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAMHAKVot044psR421B_t-Ht5EmsueVS8A",
            authDomain: "game-dev-space.firebaseapp.com",
            databaseURL: "https://game-dev-space-default-rtdb.firebaseio.com",
            projectId: "game-dev-space",
            storageBucket: "game-dev-space.firebasestorage.app",
            messagingSenderId: "1073185335190",
            appId: "1:1073185335190:web:ae9ffd88cdf89f53cbdfb7"
        };

        const app = initializeApp(firebaseConfig);
        window.fbDB = getDatabase(app);
        window.fbLib = { ref, set, push, onValue, update, increment, remove };
    </script>

    <style>
        * { box-sizing: border-box; user-select: none; outline: none; }
        body { font-family: 'Rajdhani', sans-serif; background: #0b0915; color: white; margin: 0; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(15px); border: 1px solid rgba(139, 92, 246, 0.2); }
        .btn-neon { background: #8b5cf6; color: white; font-weight: 900; transition: 0.3s; cursor: pointer; border: none; box-shadow: 0 0 15px rgba(139, 92, 246, 0.3); }
        .btn-neon:hover { transform: scale(1.05); }
        
        /* INTRO DO PRIMEIRO C√ìDIGO */
        #intro-screen { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .intro-g { font-family: 'Orbitron'; font-size: 150px; font-weight: 900; color: #8b5cf6; text-shadow: 0 0 20px #8b5cf6; animation: fall 1.5s ease-out forwards; }
        @keyframes fall { 0% { transform: translateY(-200px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
        @keyframes moveUp { 0% { transform: translateY(100%); opacity: 0; } 20% { opacity: 1; } 80% { opacity: 1; } 100% { transform: translateY(-150%); opacity: 0; } }
        
        .section-title { font-family: 'Orbitron'; font-weight: 900; font-size: 14px; letter-spacing: 2px; color: #8b5cf6; margin-bottom: 25px; display: flex; align-items: center; gap: 10px; }
        .section-title::after { content: ''; flex: 1; height: 1px; background: linear-gradient(90deg, rgba(139, 92, 246, 0.3), transparent); }
        .hidden { display: none !important; }
        
        .card-game { transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; overflow: hidden; }
        .card-game:hover { transform: translateY(-10px) scale(1.02); border-color: #8b5cf6; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="intro-screen">
        <div class="intro-g">G</div>
        <div style="height:150px; overflow:hidden; margin-top:20px; position:relative; width:300px;">
            <div style="position: absolute; width: 100%; animation: moveUp 7s linear 1.5s forwards; transform: translateY(100%); opacity: 0; text-align: center;">
                <p class="text-purple-400 text-xs font-bold uppercase italic">Developers</p>
                <p class="text-xl font-black mb-4 uppercase">BYTEZT & JHOSSMINE2</p>
                <p class="text-purple-400 text-xs font-bold uppercase italic">Producers</p>
                <p class="text-xl font-black">EXILED OWNER & CHAD</p>
            </div>
        </div>
    </div>

    <div id="main-hub" class="hidden">
        <header class="p-5 flex justify-between items-center glass sticky top-0 z-50">
            <h1 class="font-orbitron text-xl font-black text-purple-500 italic">GAMEDEV SPACE</h1>
            <div class="flex items-center gap-5">
                <button onclick="document.getElementById('modal-upload').classList.remove('hidden')" class="btn-neon px-6 py-2 rounded-full text-[11px] font-black uppercase italic">üöÄ Publicar</button>
                <div onclick="document.getElementById('modal-profile').classList.remove('hidden')" class="cursor-pointer flex items-center gap-3">
                    <span id="nav-name" class="font-bold text-xs uppercase tracking-tighter">Visitante</span>
                    <div id="nav-avatar" class="w-10 h-10 rounded-full border-2 border-purple-500 bg-cover bg-center bg-[#1a1625]"></div>
                </div>
            </div>
        </header>

        <main class="container mx-auto p-8">
            <div id="display-banner" class="w-full h-[280px] rounded-[40px] bg-[#1a1625] relative border border-white/5 bg-cover bg-center mb-20 shadow-2xl transition-all duration-500">
                <div class="absolute inset-0 bg-gradient-to-t from-[#0b0915] to-transparent rounded-[40px]"></div>
                <div id="display-avatar" class="w-[140px] h-[140px] rounded-full border-4 border-purple-500 absolute bottom-[-70px] left-[50px] bg-cover bg-center bg-[#0b0915] shadow-lg"></div>
                <h2 id="display-name" class="absolute bottom-[-50px] left-[210px] text-3xl font-black font-orbitron uppercase italic tracking-tighter text-white">USU√ÅRIO</h2>
            </div>

            <section class="mt-32">
                <h2 class="section-title">üî• DESTAQUES</h2>
                <div id="grid-highlights" class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-16"></div>

                <h2 class="section-title">üïí RECENTES</h2>
                <div id="grid-recent" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mb-16"></div>

                <h2 class="section-title">üéÆ TODOS OS JOGOS</h2>
                <div id="grid-all" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8"></div>
            </section>
        </main>
    </div>

    <div id="game-viewer" class="hidden fixed inset-0 z-[1000] bg-[#000]">
        <div class="flex flex-col h-full lg:flex-row">
            <div class="flex-1 flex flex-col p-4">
                <div class="p-4 flex justify-between items-center glass mb-4 rounded-2xl">
                    <button onclick="closeViewer()" class="bg-red-600 px-6 py-2 rounded-xl font-black text-[10px] uppercase">SAIR</button>
                    <h3 id="v-title" class="font-orbitron font-black text-purple-500 italic uppercase"></h3>
                    <div class="flex gap-2">
                        <button id="btn-like" class="bg-white/5 px-4 py-2 rounded-xl text-xs font-bold">‚ù§Ô∏è <span id="v-likes">0</span></button>
                        <button id="btn-adm" class="hidden bg-yellow-600 px-4 py-2 rounded-xl text-[10px] font-bold">DELETAR</button>
                    </div>
                </div>
                <iframe id="main-frame" class="w-full flex-1 rounded-3xl border-none bg-black shadow-2xl" allow="autoplay; fullscreen; pointer-lock"></iframe>
            </div>
            
            <div class="w-full lg:w-[400px] glass p-6 overflow-y-auto flex flex-col border-l border-purple-500/20">
                <h4 class="font-orbitron font-black text-xs mb-6 text-purple-400">COMENT√ÅRIOS</h4>
                <div id="comments-list" class="flex-1 space-y-4 mb-4 overflow-y-auto"></div>
                <div class="mt-auto flex gap-2">
                    <input type="text" id="com-input" placeholder="Diga algo..." class="flex-1 bg-white/5 p-3 rounded-xl border border-white/10 text-xs">
                    <button onclick="postComment()" class="btn-neon px-4 rounded-xl">‚û§</button>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-upload" class="hidden fixed inset-0 bg-black/95 z-[9999] flex items-center justify-center p-4">
        <div class="glass p-8 rounded-[35px] w-full max-w-xl">
            <h3 class="font-orbitron text-xl font-black mb-6 text-purple-500 italic text-center">üöÄ PUBLICAR PROJETO</h3>
            <input type="text" id="up-name" placeholder="T√≠tulo" class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 text-white mb-4">
            <input type="text" id="up-capa" placeholder="URL da Capa" class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 text-white mb-4">
            <select id="up-type" onchange="window.toggleInputs()" class="w-full bg-black p-4 rounded-2xl border border-white/10 text-white mb-4">
                <option value="url">Link Externo (URL)</option>
                <option value="code">C√≥digo HTML/Embed</option>
            </select>
            <div id="up-input-container" class="mb-6"><input type="text" id="up-content" placeholder="https://..." class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 text-white"></div>
            <button onclick="enviarProjeto()" class="w-full btn-neon py-5 rounded-2xl font-black uppercase italic">SUBIR PARA DATABASE</button>
            <button onclick="document.getElementById('modal-upload').classList.add('hidden')" class="w-full mt-4 opacity-50 text-[10px] font-bold">FECHAR PAINEL</button>
        </div>
    </div>

    <div id="modal-profile" class="hidden fixed inset-0 bg-black/95 z-[9999] flex items-center justify-center p-4">
        <div class="glass p-8 rounded-[35px] w-full max-w-sm">
            <h3 class="font-orbitron font-black mb-6 text-purple-500 text-center uppercase italic">Config Perfil</h3>
            <input type="text" id="p-name" placeholder="Apelido / Nickname" class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 text-white mb-4">
            <input type="text" id="p-avatar" placeholder="URL Avatar (.png/.gif)" class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 text-white mb-4">
            <input type="text" id="p-banner" placeholder="URL Banner (.png/.gif)" class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 text-white mb-4">
            <button onclick="saveProfile()" class="w-full btn-neon py-4 rounded-2xl font-black uppercase italic">Sincronizar Tudo</button>
            <button onclick="document.getElementById('modal-profile').classList.add('hidden')" class="w-full mt-4 text-[10px] opacity-30">VOLTAR</button>
        </div>
    </div>

    <script>
        // SEGURAN√áA: Bloquear F12 e Atalhos
        document.onkeydown = function(e) {
            if(e.keyCode == 123 || (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74)) || (e.ctrlKey && e.keyCode == 85)) return false;
        };

        // USER DATA
        let currentUser = JSON.parse(localStorage.getItem('gs_user')) || { 
            id: 'u'+Date.now(), 
            name: 'Visitante', 
            avatar: 'https://i.pinimg.com/originals/8a/80/7e/8a807ec3bc5406c151e2472b5344337b.gif', 
            banner: 'https://i.pinimg.com/originals/0b/1e/24/0b1e2499368297753e053f56854972f0.gif',
            isAdmin: false 
        };
        let activeGameId = null;

        // LOAD SYSTEM
        window.onload = () => { 
            setTimeout(() => { 
                document.getElementById('intro-screen').classList.add('hidden'); 
                document.getElementById('main-hub').classList.remove('hidden'); 
                updateUI(); loadGames(); 
            }, 8500); 
        };

        window.toggleInputs = function() {
            const t = document.getElementById('up-type').value;
            const c = document.getElementById('up-input-container');
            if(t === 'code') c.innerHTML = `<textarea id="up-content" placeholder="Cole o c√≥digo HTML aqui..." class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 h-32 text-white text-xs"></textarea>`;
            else c.innerHTML = `<input type="text" id="up-content" placeholder="https://..." class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 text-white">`;
        }

        function updateUI() {
            document.getElementById('nav-avatar').style.backgroundImage = `url('${currentUser.avatar}')`;
            document.getElementById('display-avatar').style.backgroundImage = `url('${currentUser.avatar}')`;
            document.getElementById('display-banner').style.backgroundImage = `url('${currentUser.banner}')`;
            document.getElementById('nav-name').innerText = currentUser.name;
            document.getElementById('display-name').innerText = currentUser.name;
            
            // Preencher inputs do perfil
            document.getElementById('p-name').value = currentUser.name;
            document.getElementById('p-avatar').value = currentUser.avatar;
            document.getElementById('p-banner').value = currentUser.banner;
        }

        async function saveProfile() {
            currentUser.name = document.getElementById('p-name').value || 'An√¥nimo';
            currentUser.avatar = document.getElementById('p-avatar').value || currentUser.avatar;
            currentUser.banner = document.getElementById('p-banner').value || currentUser.banner;
            // Hack para ADM (voc√™ pode mudar isso)
            if(currentUser.name.toLowerCase() === 'chad_adm') currentUser.isAdmin = true;
            
            localStorage.setItem('gs_user', JSON.stringify(currentUser));
            updateUI();
            document.getElementById('modal-profile').classList.add('hidden');
        }

        async function enviarProjeto() {
            const name = document.getElementById('up-name').value;
            const capa = document.getElementById('up-capa').value;
            const type = document.getElementById('up-type').value;
            const content = document.getElementById('up-content').value;
            
            if(!name || !content) return alert("Preencha o t√≠tulo e o conte√∫do!");

            const newRef = window.fbLib.push(window.fbLib.ref(window.fbDB, 'games'));
            window.fbLib.set(newRef, {
                ownerId: currentUser.id,
                ownerName: currentUser.name,
                name: name,
                capa: capa,
                type: type,
                content: content,
                likes: 0,
                timestamp: Date.now()
            }).then(() => location.reload());
        }

        function loadGames() {
            window.fbLib.onValue(window.fbLib.ref(window.fbDB, 'games'), snap => {
                const data = snap.val(); if(!data) return;
                const list = Object.keys(data).map(id => ({id, ...data[id]})).sort((a,b) => b.timestamp - a.timestamp);
                
                const render = (item) => `
                    <div class="card-game p-4 glass rounded-[25px] cursor-pointer border border-white/5" onclick="openViewer('${item.id}')">
                        <img src="${item.capa || 'https://via.placeholder.com/400x200?text=Sed-Games'}" class="w-full h-40 object-cover rounded-2xl mb-4">
                        <p class="font-black uppercase text-xs truncate mb-1">${item.name}</p>
                        <p class="text-[9px] text-purple-400 font-bold uppercase italic">${item.ownerName}</p>
                    </div>`;

                document.getElementById('grid-all').innerHTML = list.map(render).join('');
                document.getElementById('grid-recent').innerHTML = list.slice(0, 4).map(render).join('');
                document.getElementById('grid-highlights').innerHTML = list.slice(0, 2).map(item => `
                    <div class="relative h-64 rounded-[30px] overflow-hidden cursor-pointer group" onclick="openViewer('${item.id}')">
                        <img src="${item.capa}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-purple-900/90 to-transparent p-8 flex flex-col justify-end">
                            <h3 class="text-2xl font-black uppercase italic">${item.name}</h3>
                            <p class="text-xs font-bold text-white/70">DESTAQUE DA SEMANA</p>
                        </div>
                    </div>
                `).join('');
            });
        }

        function openViewer(id) {
            activeGameId = id;
            window.fbLib.onValue(window.fbLib.ref(window.fbDB, `games/${id}`), snap => {
                const g = snap.val(); if(!g) return;
                document.getElementById('v-title').innerText = g.name;
                document.getElementById('v-likes').innerText = g.likes || 0;
                const f = document.getElementById('main-frame');
                if(g.type === 'code') f.srcdoc = g.content; else f.src = g.content;
                
                // Mostrar bot√£o de apagar se for dono ou ADM
                if(g.ownerId === currentUser.id || currentUser.isAdmin) {
                    const btn = document.getElementById('btn-adm');
                    btn.classList.remove('hidden');
                    btn.onclick = () => { if(confirm("Apagar jogo?")) window.fbLib.remove(window.fbLib.ref(window.fbDB, `games/${id}`)).then(() => closeViewer()); };
                }
                
                loadComments(id);
                document.getElementById('game-viewer').classList.remove('hidden');
            });

            document.getElementById('btn-like').onclick = () => {
                window.fbLib.update(window.fbLib.ref(window.fbDB, `games/${id}`), { likes: window.fbLib.increment(1) });
            };
        }

        function loadComments(gameId) {
            window.fbLib.onValue(window.fbLib.ref(window.fbDB, `comments/${gameId}`), snap => {
                const list = document.getElementById('comments-list');
                list.innerHTML = "";
                const data = snap.val();
                if(data) {
                    Object.values(data).reverse().forEach(c => {
                        list.innerHTML += `
                            <div class="glass p-3 rounded-xl border-l-2 border-purple-500">
                                <div class="flex items-center gap-2 mb-1">
                                    <div class="w-4 h-4 rounded-full bg-cover bg-center" style="background-image:url('${c.avatar}')"></div>
                                    <span class="text-[9px] font-black uppercase text-purple-400">${c.name}</span>
                                </div>
                                <p class="text-[11px] text-white/80">${c.text}</p>
                            </div>`;
                    });
                }
            });
        }

        window.postComment = function() {
            const input = document.getElementById('com-input');
            if(!input.value) return;
            const comRef = window.fbLib.push(window.fbLib.ref(window.fbDB, `comments/${activeGameId}`));
            window.fbLib.set(comRef, {
                name: currentUser.name,
                avatar: currentUser.avatar,
                text: input.value,
                timestamp: Date.now()
            });
            input.value = "";
        }

        function closeViewer() {
            const f = document.getElementById('main-frame');
            f.src = "about:blank"; f.srcdoc = "";
            document.getElementById('game-viewer').classList.add('hidden');
            document.getElementById('btn-adm').classList.add('hidden');
        }
    </script>
</body>
</html>
